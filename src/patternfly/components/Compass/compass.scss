@use '../../sass-utilities' as *;

@include pf-root($compass) {
  --#{$compass}--BackgroundImage: var(--#{$compass}--BackgroundImage--light);
  --#{$compass}--BackgroundImage--light: none;
  --#{$compass}--BackgroundImage--dark: none;
  --#{$compass}--Padding: var(--pf-t--global--spacer--inset--page-chrome);
  --#{$compass}--RowGap: var(--pf-t--global--spacer--xl);
  --#{$compass}--ColumnGap: var(--pf-t--global--spacer--xl);
  --#{$compass}__nav--RowGap: var(--pf-t--global--spacer--gap--group--vertical);
  --#{$compass}__nav--PaddingBlockStart: 0;
  --#{$compass}__nav--PaddingBlockEnd: 0;
  --#{$compass}__nav--PaddingInlineStart: var(--pf-t--global--spacer--sm);
  --#{$compass}__nav--PaddingInlineEnd: var(--pf-t--global--spacer--sm);
  --#{$compass}__nav-main--PaddingInlineStart: var(--pf-t--global--spacer--lg);
  --#{$compass}__nav-main--PaddingInlineEnd: var(--pf-t--global--spacer--lg);
  --#{$compass}__sidebar--Padding: var(--pf-t--global--spacer--sm);
  --#{$compass}__main--RowGap: var(--pf-t--global--spacer--md);
  --#{$compass}__main-header-content--RowGap: var(--pf-t--global--spacer--sm);
  --#{$compass}__main-header-content--ColumnGap: var(--pf-t--global--spacer--md);
  --#{$compass}__panel--BackgroundColor: var(--pf-t--global--background--color--glass--default);
  --#{$compass}__panel--BackdropFilter: var(--pf-t--global--background--color--glass--filter);
  --#{$compass}__panel--BorderRadius: var(--pf-t--global--border--radius--large);
  --#{$compass}__panel--m-pill--BorderRadius: var(--pf-t--global--border--radius--pill);
  --#{$compass}__panel--PaddingBlockStart: var(--pf-t--global--spacer--inset--page-chrome);
  --#{$compass}__panel--PaddingBlockEnd: var(--pf-t--global--spacer--inset--page-chrome);
  --#{$compass}__panel--PaddingInlineStart: var(--pf-t--global--spacer--inset--page-chrome);
  --#{$compass}__panel--PaddingInlineEnd: var(--pf-t--global--spacer--inset--page-chrome);
  --#{$compass}__panel--BorderWidth: var(--pf-t--global--border--width--regular);
  --#{$compass}__panel--BorderColor: var(--pf-t--global--border--color--alt);
  --#{$compass}__panel--BoxShadow: var(--pf-t--global--box-shadow--md);
  --#{$compass}__message-bar--Width: 450px;
  --#{$compass}__message-bar--MinWidth: 300px;
  --#{$compass}__message-bar--MaxWidth: 600px;
}

.#{$compass} {
  display: grid;
  grid-template-areas:
    "header header header"
    "sidebar-start main sidebar-end";
  grid-template-rows: auto 1fr;
  grid-template-columns: auto 1fr auto;
  grid-auto-rows: auto;
  gap: var(--#{$compass}--RowGap) var(--#{$compass}--ColumnGap);
  align-items: center;
  justify-content: center;
  height: 100dvh;
  padding: var(--#{$compass}--Padding);
  background-image: var(--#{$compass}--BackgroundImage);
  background-size: cover;

  :root:where(.pf-v6-theme-dark) & {
    --#{$compass}--BackgroundImage: var(--#{$compass}--BackgroundImage--dark);
  }

  @at-root .#{$compass}__panel,
  & {
    &.pf-m-no-glass {
      --#{$compass}__panel--BackgroundColor: var(--pf-t--global--background--color--primary--default);
    }
  }
}

.#{$compass}__header {
  display: grid;
  grid-area: header;
  grid-template-columns: 1fr auto 1fr;
  align-items: start;
}

.#{$compass}__profile {
  justify-self: end;

  // improves perceived alignment since it's a plain toggle
  .#{$menu-toggle}.pf-m-plain {
    margin-block-start: calc(var(--#{$menu-toggle}--PaddingBlockStart) * -1);
  }
}

.#{$compass}__nav {
  --#{$compass}__panel--PaddingBlockStart: var(--#{$compass}__nav--PaddingBlockStart);
  --#{$compass}__panel--PaddingBlockEnd: var(--#{$compass}__nav--PaddingBlockEnd);
  --#{$compass}__panel--PaddingInlineStart: var(--#{$compass}__nav--PaddingInlineStart);
  --#{$compass}__panel--PaddingInlineEnd: var(--#{$compass}__nav--PaddingInlineEnd);

  display: flex;
  flex-direction: column;
  gap: var(--#{$compass}__nav--RowGap);
  align-items: center;
  justify-self: stretch;
}

.#{$compass}__nav-content {
  display: flex;
  align-items: center;
}

.#{$compass}__nav-main {
  padding-inline-start: var(--#{$compass}__nav-main--PaddingInlineStart);
  padding-inline-end: var(--#{$compass}__nav-main--PaddingInlineEnd);
}

.#{$compass}__sidebar {
  --#{$compass}__panel--PaddingBlockStart: var(--#{$compass}__sidebar--PaddingBlockStart);
  --#{$compass}__panel--PaddingBlockEnd: var(--#{$compass}__sidebar--PaddingBlockEnd);
  --#{$compass}__panel--PaddingInlineStart: var(--#{$compass}__sidebar--PaddingInlineStart);
  --#{$compass}__panel--PaddingInlineEnd: var(--#{$compass}__sidebar--PaddingInlineEnd);

  &.pf-m-start {
    grid-area: sidebar-start;
  }
}

.#{$compass}__main {
  display: flex;
  flex-direction: column;
  grid-area: main;
  gap: var(--#{$compass}__main--RowGap);
  align-self: stretch;
  min-height: 0;
}

.#{$compass}__main-header-content {
  display: flex;
  gap: var(--#{$compass}__main-header-content--RowGap) var(--#{$compass}__main-header-content--ColumnGap);
}

.#{$compass}__main-header-title {
  flex-grow: 1;
}

.#{$compass}__content {
  display: flex;
  flex: 1 0 0;
  flex-direction: column;
  min-height: 0;
  overflow: auto;

  // mask: linear-gradient(
  //   rgba(0, 0, 0, calc(1 - var(--#{$compass}__scroll-top) / 20)),
  //   black var(--#{$compass}--feather--length),
  //   black calc(100% - var(--#{$compass}--feather--length)),
  //   rgba(0, 0, 0, calc(1 - var(--#{$compass}__scroll-bottom) / 20))
  // );
  // backdrop-filter: blur(8px);

  > *:last-child {
    flex-grow: 1;
    max-height: 100%;
  }
}

.#{$compass}__main-footer {
  display: flex;
  justify-content: center;
  margin-top: calc(var(--#{$compass}__main--RowGap) * -1 + var(--#{$compass}--RowGap)); // Creates same gap as parent compass grid, mimicking the compass footer
}

.#{$compass}__sidebar.pf-m-end {
  grid-area: sidebar-end;
  padding: var(--pf-t--global--spacer--sm);
}

.#{$compass}__footer {
  display: flex;
  grid-column: 1 / -1;
  justify-content: center;
}

.#{$compass}__message-bar {
  width: var(--#{$compass}__message-bar--Width);
  min-width: var(--#{$compass}__message-bar--MinWidth);
  max-width: var(--#{$compass}__message-bar--MaxWidth);
}

.#{$compass}__panel {
  padding-block-start: var(--#{$compass}__panel--PaddingBlockStart);
  padding-block-end: var(--#{$compass}__panel--PaddingBlockEnd);
  padding-inline-start: var(--#{$compass}__panel--PaddingInlineStart);
  padding-inline-end: var(--#{$compass}__panel--PaddingInlineEnd);
  background-color: var(--#{$compass}__panel--BackgroundColor);
  backdrop-filter: var(--#{$compass}__panel--BackdropFilter);
  border: var(--#{$compass}__panel--BorderWidth) solid var(--#{$compass}__panel--BorderColor);
  border-radius: var(--#{$compass}__panel--BorderRadius);
  box-shadow: var(--#{$compass}__panel--BoxShadow);

  &.pf-m-no-border {
    border-width: 0;
  }

  &.pf-m-no-padding {
    padding: 0;
  }

  &.pf-m-full-height {
    height: 100%;
  }

  &.pf-m-pill {
    border-radius: var(--#{$compass}__panel--m-pill--BorderRadius);
  }

  &.pf-m-scrollable {
    overflow: auto;
  }
}

:where(.pf-v6-theme-dark) .#{$compass} {
  // dark theme goes here
}

// .pf-chatbot__message-bar {
//   width: 100%;
//   min-width: var(--#{$compass}--message-bar--min-width);
//   max-width: var(--#{$compass}--message-bar--max-width);
//   padding-inline-start: 0px;
//   padding-inline-end: 0.8em;
//   background: transparent;
//   border: 0;

//   &:hover,
//   &:focus-within {
//     box-shadow: var(--pf-t--global--box-shadow--md);
//   }

//   .pf-chatbot__button--send.pf-m-compact {
//     width: auto;
//     height: auto;
//     padding: var(--pf-v6-c-button--m-small--PaddingBlockStart) var(--pf-v6-c-button--m-small--PaddingInlineEnd)
//       var(--pf-v6-c-button--m-small--PaddingBlockEnd) var(--pf-v6-c-button--m-small--PaddingInlineStart);

//     .pf-v6-c-button__icon {
//       min-width: 1lh;
//     }
//   }
// }



/* stylelint-disable */
@media (max-width: 1200px) {
  .#{$compass} * {
    display: none;
  }
  .#{$compass} {
    position: relative;
    display: grid;
    grid-template-columns: auto;
    grid-template-rows: auto;
    place-content: center;
    gap: 0;

    &::after {
      padding: 1em;
      border-radius: var(--pf-t--global--border--radius--large);
      background: var(--pf-t--global--background--color--primary--default);
      content: "This page is optimized for wide screens.\a\a Please view on a larger display and/or make your browser window wider.";
      width: 80%;
      width: 300px;
      border: 1px solid var(--pf-t--global--border--color--default);
      box-shadow: var(--pf-t--global--box-shadow--md);
      white-space: pre-wrap;
      text-align: center;
    }
  }
}
/* stylelint-enable */
