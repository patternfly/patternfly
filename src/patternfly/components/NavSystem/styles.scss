@import "../../patternfly-utilities";

.pf-c-nav {
  $namespace: &;

  /* stylelint-disable */
  // Nav 
  --pf-c-nav--Width:                                          var(--pf-global--nav--Width--mobile);
  --pf-c-nav--PaddingTop:                                     var(--pf-global--spacer--lg);
  --pf-c-nav--PaddingBottom:                                  var(--pf-global--spacer--lg);
  --pf-c-nav--ZIndex:                                         var(--pf-global--ZIndex--xl);
  --pf-c-nav--BackgroundColor:                                var(--pf-global--BackgroundColor--100);
  --pf-c-nav--BoxShadow:                                      var(--pf-global--BoxShadow--lg-right);
  // --pf-c-nav--FontWeight:                                     var(--pf-global--FontWeight--normal);
  // --pf-c-nav--active--FontWeight:                             var(--pf-global--FontWeight--bold);

  // Nav list link
  --pf-c-nav__list-link--PaddingTop:                          var(--pf-global--spacer--md);
  --pf-c-nav__list-link--PaddingRight:                        var(--pf-global--spacer--2xl);
  --pf-c-nav__list-link--PaddingBottom:                       var(--pf-global--spacer--md);
  --pf-c-nav__list-link--PaddingLeft:                         var(--pf-global--spacer--2xl);
  --pf-c-nav__list-link--FontWeight:                          var(--pf-global--FontWeight--normal);
  --pf-c-nav__list-link--active--FontWeight:                  var(--pf-global--FontWeight--semi-bold);
  --pf-c-nav__list-link--not-first-child--PaddingTop:         var(--pf-global--spacer--xl);
  
  // Nav list link :after
  --pf-c-nav__list-link--after--Width:                        3.125rem;
  --pf-c-nav__list-link--after--Height:                       3px;
  // shared value for placement
  --pf-c-nav__list-link--after--Left:                         var(--pf-c-nav__list-link--PaddingLeft);
  --pf-c-nav__list-link--after--BackgroundColor:              transparent;
  --pf-c-nav__list-link--active--after--BackgroundColor:      var(--pf-global--link--Color);
  --pf-c-nav__list-link--disabled--after--BackgroundColor:    transparent;

  // Nav list link colors
  --pf-c-nav__list-link--Color:                               var(--pf-global--Color--dark-100);
  --pf-c-nav__list-link--active--Color:                       var(--pf-global--link--Color);
  --pf-c-nav__list-link--disabled--Color:                     var(--pf-global--Color--disabled);

  // Nav list link background colors
  --pf-c-nav__list-link--BackgroundColor:                     transparent;
  --pf-c-nav__list-link--active--BackgroundColor:             transparent;
  --pf-c-nav__list-link--disabled--BackgroundColor:           var(--pf-global--BackgroundColor--disabled);

  // Nav list list action
  --pf-c-nav__list-expand--PaddingRight:                      var(--pf-global--spacer--sm);
  --pf-c-nav__list-expand--PaddingLeft:                       var(--pf-global--spacer--sm);

  // Nav list simple link
  --pf-c-nav__list-simple-link--PaddingTop:                   var(--pf-global--spacer--sm);
  --pf-c-nav__list-simple-link--PaddingRight:                 var(--pf-global--spacer--2xl);
  --pf-c-nav__list-simple-link--PaddingBottom:                var(--pf-global--spacer--sm);
  --pf-c-nav__list-simple-link--PaddingLeft:                  var(--pf-global--spacer--2xl);
  --pf-c-nav__list-simple-link--FontWeight:                   var(--pf-global--FontWeight--normal);
  --pf-c-nav__list-simple-link--active--FontWeight:           var(--pf-global--FontWeight--semi-bold);

  // Nav list simple link color
  --pf-c-nav__list-simple-link--Color:                        var(--pf-global--Color--dark-100);
  --pf-c-nav__list-simple-link--active--Color:                var(--pf-global--link--Color);
  --pf-c-nav__list-simple-link--disabled--Color:              var(--pf-global--Color--disabled);

  // Nav list simple link background color
  --pf-c-nav__list-simple-link--BackgroundColor:              transparent;
  --pf-c-nav__list-simple-link--active--BackgroundColor:      $pf-color-black-150;
  --pf-c-nav__list-simple-link--disabled--BackgroundColor:    var(--pf-global--BackgroundColor--disabled);

  // Subnav links
  --pf-c-nav__list-item--pf-c-nav__list-simple-link:          calc(var(--pf-global--spacer--2xl) + var(--pf-global--spacer--md));
  --pf-c-nav__subnav--MarginTop:                              var(--pf-global--spacer--md);

  // List horizontal link padding
  --pf-c-nav__list-horizontal-link--PaddingTop:                         var(--pf-global--spacer--xl);
  --pf-c-nav__list-horizontal-link--PaddingRight:                       var(--pf-global--spacer--lg);
  --pf-c-nav__list-horizontal-link--PaddingBottom:                      var(--pf-global--spacer--xl);
  --pf-c-nav__list-horizontal-link--PaddingLeft:                        var(--pf-global--spacer--lg);
  --pf-c-nav__list-horizontal-link--FontWeight:                         var(--pf-global--link--normal);
  --pf-c-nav__list-horizontal-link--active--FontWeight:                 var(--pf-global--FontWeight--bold);

  // List horizontal color
  --pf-c-nav__list-horizontal-link--Color:                              var(--pf-global--nav__horizontal--link--Color--desktop);
  --pf-c-nav__list-horizontal-link--active--Color:                      var(--pf-global--nav__horizontal--link--Color--desktop--hover);
  --pf-c-nav__list-horizontal-link--disabled--Color:                    var(--pf-global--Color--disabled);

  // List horizontal link background color
  --pf-c-nav__list-horizontal-link--BackgroundColor:                    transparent;
  --pf-c-nav__list-horizontal-link--active--BackgroundColor:            transparent;
  --pf-c-nav__list-horizontal-link--disabled--BackgroundColor:          var(--pf-global--BackgroundColor--disabled);

  // List horizontal link::after background color
  --pf-c-nav__list-horizontal-link--after--BackgroundColor:             transparent;
  --pf-c-nav__list-horizontal-link--active--after--BackgroundColor:     var(--pf-global--nav__horizontal--link--BackgroundColor--desktop--hover--after);
  --pf-c-nav__list-horizontal-link--disabled--after--BackgroundColor:   transparent;

  // List tertiary
  --pf-c-nav--m-nav-tertiary--PaddingRight:                             var(--pf-global--spacer--2xl);
  --pf-c-nav--m-nav-tertiary--PaddingLeft:                              var(--pf-global--spacer--2xl);

  // List tertiary
  --pf-c-nav__list-tertiary--BoxShadow:                                 var(--pf-global--BoxShadow--lg-bottom);

  // List tertiary link padding
  --pf-c-nav__list-tertiary-link--PaddingTop:                           var(--pf-global--spacer--md);
  --pf-c-nav__list-tertiary-link--PaddingRight:                         var(--pf-global--spacer--lg);
  --pf-c-nav__list-tertiary-link--PaddingBottom:                        var(--pf-global--spacer--md);
  --pf-c-nav__list-tertiary-link--PaddingLeft:                          var(--pf-global--spacer--lg);
  --pf-c-nav__list-tertiary-link--FontWeight:                           var(--pf-global--link--normal);
  --pf-c-nav__list-tertiary-link--active--FontWeight:                   var(--pf-global--FontWeight--bold);
  
  // List tertiary link color
  --pf-c-nav__list-tertiary-link--Color:                                var(--pf-global--Color--dark-100);
  --pf-c-nav__list-tertiary-link--active--Color:                        var(--pf-global--link--Color);
  --pf-c-nav__list-tertiary-link--disabled--Color:                      var(--pf-global--link--Color--disabled);

  // List tertiary link::after background-color
  --pf-c-nav__list-tertiary-link--after--BackgroundColor:               transparent;
  --pf-c-nav__list-tertiary-link--active--after--BackgroundColor:       var(--pf-global--link--Color);
  --pf-c-nav__list-tertiary-link--disabled--after--BackgroundColor:     transparent;

  // List tertiary link background color
  --pf-c-nav__list-tertiary-link--BackgroundColor:                      transparent;

  // List expand
  --pf-c-nav__list-expand--FontSize:                                    pf-font-prem(20px);

  // Nav section
  --pf-c-nav__section--MarginTop:                                       var(--pf-global--spacer--xl);

  // Nav section title
  --pf-c-nav__section-title--PaddingTop:                                var(--pf-global--spacer--sm);
  --pf-c-nav__section-title--PaddingRight:                              var(--pf-global--spacer--2xl);
  --pf-c-nav__section-title--PaddingBottom:                             var(--pf-global--spacer--sm);
  --pf-c-nav__section-title--PaddingLeft:                               var(--pf-global--spacer--2xl);
  --pf-c-nav__section-title--FontSize:                                  var(--pf-global--FontSize--sm);
  --pf-c-nav__section-title--Color:                                     var(--pf-global--Color--dark-200);
  --pf-c-nav__section-title--FontWeight:                                var(--pf-global--FontWeight--semi-bold);
  --pf-c-nav--mobile--Width:                                            var(--pf-global--nav--Width--mobile);
  --pf-c-nav--desktop--Width:                                           pf-size-prem(280px);
  @media screen and (min-width: $pf-global--breakpoint--xl) {
    --pf-c-nav--desktop--Width:                                           pf-size-prem(360px);
  }
  
  /* stylelint-enable */

  // Base styling
  grid-area: 2 / 1;
  z-index: var(--pf-c-nav--ZIndex);
  width: var(--pf-c-nav--Width);
  padding-top: var(--pf-c-nav--PaddingTop);
  padding-bottom: var(--pf-c-nav--PaddingBottom);
  // Set overflow hidden to hide nested list on collapse
  overflow: hidden;
  background-color: var(--pf-c-nav--BackgroundColor);
  box-shadow: var(--pf-c-nav--BoxShadow);
  -webkit-font-smoothing: antialiased;

  // Revert to static layout
  @media (min-width: $pf-global--breakpoint--md) {
    width: var(--pf-c-nav--desktop--Width);
    max-width: var(--pf-c-nav--desktop--Width);
    transform: translate3d(0, 0, 0);
  }

  // Mobile
  // Expanded nav
  .pf-m-expanded & {
    transform: translate3d(0, 0, 0);
  }

  // Desktop
  // Collapse nav
  .pf-m-collapsed & {

    @media screen and (min-width: $pf-global--breakpoint--md) {
      max-width: 0;
      overflow: hidden;
    }
  }


  // If navigation, other than header, set width of first children to preserve presentation on navigation collapse
  > * {
    // background: #cc0;
    @media screen and (min-width: $pf-global--breakpoint--md) {
      width: var(--pf-c-nav--desktop--Width);
    }
  }

  // Horizontal nav, masthead
  .pf-m-nav-horizontal & {
    padding: 0;
    background-color: transparent;
  }

  // Horizontal nav
  .pf-m-nav-horizontal &,
  &.pf-m-nav-tertiary {
    grid-area: none;
    z-index: auto;
    width: auto;
    overflow: visible;
    transform: translate3d(0, 0, 0);

    @media screen and (min-width: $pf-global--breakpoint--md) {
      width: auto;
      max-width: none;
    }

    // > * {
    //   width: auto;
    // }
  }

  // Transitions
  transition: all 500ms cubic-bezier(.42, 0, .58, 1);
  transform: translate3d(-100%, 0, 0);

  // List - default
  &__list {

    // Item
    &-item {
      position: relative;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      background-color: var(--pf-c-nav__item--BackgroundColor);
    }

    // Link
    &-link {
      position: relative;
      display: flex;
      flex: 1;
      align-items: baseline;
      padding:
        var(--pf-c-nav__list-link--PaddingTop)
        var(--pf-c-nav__list-link--PaddingRight)
        var(--pf-c-nav__list-link--PaddingBottom)
        var(--pf-c-nav__list-link--PaddingLeft);

      font-weight: var(--pf-c-nav__list-link--FontWeight);
      color: var(--pf-c-nav__list-link--Color);
      word-break: break-all;
      background-color: var(--pf-c-nav__list-link--BackgroundColor);

      // Adjust padding top for subsequent links
      #{$namespace}__list-item:not(:first-child) & {
        padding-top: var(--pf-c-nav__list-link--not-first-child--PaddingTop);
      }

      #{$namespace}__list-horizontal-item:not(:first-child) & {
        @media screen and (max-width: $pf-global--breakpoint--md) {
          padding-top: var(--pf-c-nav__list-link--not-first-child--PaddingTop);
        }
      }

      // After - border bottom treatment
      &::after {
        position: absolute;
        bottom: 0;
        left: var(--pf-c-nav__list-link--after--Left);
        width: var(--pf-c-nav__list-link--after--Width);
        height: var(--pf-c-nav__list-link--after--Height);
        content: "";
        background-color: var(--pf-c-nav__list-link--after--BackgroundColor);
      }

      // States
      &:hover,
      &:focus,
      &:active,
      &.pf-m-active,
      .pf-m-current > &,
      &.pf-m-current {
        font-weight: var(--pf-c-nav__list-link--active--FontWeight);
        color: var(--pf-c-nav__list-link--active--Color);
        background-color: var(--pf-c-nav__list-link--active--BackgroundColor);

        &::after {
          background-color: var(--pf-c-nav__list-link--active--after--BackgroundColor);
        }
      }

      // Disabled
      &.pf-m-disabled,
      &:disabled {
        color: var(--pf-c-nav__list-link--disabled--Color);
        cursor: not-allowed;
        background-color: var(--pf-c-nav__list-link--disabled--BackgroundColor);

        &::after {
          background-color: var(--pf-c-nav__list-link--disabled--after--BackgroundColor);
        }
      }
    }

    // Expand
    &-expand {
      flex: none;
      padding-right: var(--pf-c-nav__list-expand--PaddingRight);
      padding-left: var(--pf-c-nav__list-expand--PaddingLeft);
      margin-left: auto;
      font-size: var(--pf-c-nav__list-expand--FontSize);
      line-height: 1;
      pointer-events: none;
      border: 0;

      // Add transition to base
      & > * {
        transition: .1s ease-in-out;
      }

      // Rotate the icon
      .pf-c-nav__list-item.pf-m-expanded & > * {
        transform: rotate(90deg);
      }
    }
  }

  // List simple
  // Desc: Simple list, no bottom border, no children. Used independently or as a subnav item of .pf-c-nav__list (default list component).
  &__list-simple {
    flex: 1 0 100%;

    // List simple link
    &-link {
      display: block;
      padding:
        var(--pf-c-nav__list-simple-link--PaddingTop)
        var(--pf-c-nav__list-simple-link--PaddingRight)
        var(--pf-c-nav__list-simple-link--PaddingBottom)
        var(--pf-c-nav__list-simple-link--PaddingLeft);

      font-weight: var(--pf-c-nav__list-simple-link--FontWeight);
      color: var(--pf-c-nav__list-simple-link--Color);
      background-color: var(--pf-c-nav__list-simple-link--BackgroundColor);

      // States
      // Hover
      &:hover,
      &:focus,
      &:active,
      &.pf-m-active,
      &.pf-m-current {
        font-weight: var(--pf-c-nav__list-simple-link--active--FontWeight);
        color: var(--pf-c-nav__list-simple-link--active--Color);
        background-color: var(--pf-c-nav__list-simple-link--active--BackgroundColor);
      }

      // Adjust padding of descendant links
      #{$namespace}__list-item & {
        padding-left: var(--pf-c-nav__list-item--pf-c-nav__list-simple-link);
      }
    }
  }

  &__list-horizontal,
  &__list-tertiary {
    display: flex;
    flex-wrap: nowrap;

    &-item {
      flex: 0 0 auto;
    }
  }

  // List horizontal, masthead
  &__list-horizontal {

    &-link {
      position: relative;
      display: inline-block;
      padding:
        var(--pf-c-nav__list-horizontal-link--PaddingTop)
        var(--pf-c-nav__list-horizontal-link--PaddingRight)
        var(--pf-c-nav__list-horizontal-link--PaddingBottom)
        var(--pf-c-nav__list-horizontal-link--PaddingLeft);

      font-weight: var(--pf-c-nav__list-horizontal-link--FontWeight);
      color: var(--pf-c-nav__list-horizontal-link--Color);
      white-space: nowrap;
      background-color: var(--pf-c-nav__list-horizontal-link--BackgroundColor);

      // Hover
      &:hover,
      &:focus,
      &:active,
      &.pf-m-active,
      &.pf-m-current {
        font-weight: var(--pf-c-nav__list-horizontal-link--active--FontWeight);
        color: var(--pf-c-nav__list-horizontal-link--active--Color);
        background-color: var(--pf-c-nav__list-horizontal-link--active--BackgroundColor);

        &::after {
          background-color: var(--pf-c-nav__list-horizontal-link--active--after--BackgroundColor);
        }
      }

      // Disabled
      &.pf-m-disabled,
      &:disabled {
        color: var(--pf-c-nav__list-horizontal-link--disabled--Color);
        background-color: var(--pf-c-nav__list-horizontal-link--disabled--BackgroundColor);

        &::after {
          background-color: var(--pf-c-nav__list-horizontal-link--disabled--after--BackgroundColor);
        }
      }

      // After - border bottom treatment
      &::after {
        position: absolute;
        bottom: 0;
        left: 0;
        display: block;
        width: 100%;
        height: var(--pf-c-nav__list-link--after--Height);
        content: "";
        background-color: var(--pf-c-nav__list-horizontal-link--after--BackgroundColor);
      }
    }
  }

  // List tertiary container styling
  &.pf-m-nav-tertiary {
    width: 100vw;
    // padding-right: var(--pf-c-nav--m-nav-tertiary--PaddingRight);
    padding-left: var(--pf-c-nav--m-nav-tertiary--PaddingLeft);
    overflow-x: auto;

    &::-webkit-scrollbar {
      display: none;
    }

    @media screen and (min-width: $pf-global--breakpoint--md) {
      width: auto;
    }
  }

  // List tertiary
  &__list-tertiary {

    // List tertiary link
    &-link {
      position: relative;
      display: inline-block;
      padding:
        var(--pf-c-nav__list-tertiary-link--PaddingTop)
        var(--pf-c-nav__list-tertiary-link--PaddingRight)
        var(--pf-c-nav__list-tertiary-link--PaddingBottom)
        var(--pf-c-nav__list-tertiary-link--PaddingLeft);

      font-weight: var(--pf-c-nav__list-tertiary-link--FontWeight);
      color: var(--pf-c-nav__list-tertiary-link--Color);

      // Hover
      &:hover,
      &:focus,
      &:active,
      &.pf-m-active,
      &.pf-m-current {
        font-weight: var(--pf-c-nav__list-tertiary-link--active--FontWeight);
        color: var(--pf-c-nav__list-tertiary-link--active--Color);
        background-color: var(--pf-c-nav__list-tertiary-link--active--BackgroundColor);

        &::after {
          background-color: var(--pf-c-nav__list-tertiary-link--active--after--BackgroundColor);
        }
      }

      // Disabled
      &.pf-m-disabled,
      &:disabled {
        color: var(--pf-c-nav__list-tertiary-link--disabled--Color);
        background-color: var(--pf-c-nav__list-tertiary-link--active--BackgroundColor);

        &::after {
          background-color: var(--pf-c-nav__list-tertiary-link--active--after--BackgroundColor);
        }
      }
      // After - border bottom treatment
      &::after {
        position: absolute;
        bottom: 0;
        left: 0;
        display: block;
        width: 100%;
        height: var(--pf-c-nav__list-link--after--Height);
        content: "";
        background-color: var(--pf-c-nav__list-tertiary-link--after--BackgroundColor);
      }
    }
  }

  // Subnav
  &__subnav {
    flex: 1 0 100%;
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    /* stylelint-disable */
    transition: all 500ms cubic-bezier(.645, .045, .355, 1);
    transition-timing-function: cubic-bezier(.645, .045, .355, 1);
    /* stylelint-enable */

    .pf-c-nav__list-item.pf-m-expanded & {
      max-height: 300px;
      margin-top: var(--pf-c-nav__subnav--MarginTop);
      opacity: 1;
    }
  }

  // Section
  &__section {

    // Title 
    &-title {
      padding:
        var(--pf-c-nav__section-title--PaddingTop)
        var(--pf-c-nav__section-title--PaddingRight)
        var(--pf-c-nav__section-title--PaddingBottom)
        var(--pf-c-nav__section-title--PaddingLeft);

      font-size: var(--pf-c-nav__section-title--FontSize);
      font-weight: var(--pf-c-nav__section-title--FontWeight);
      color: var(--pf-c-nav__section-title--Color);
    }

    & + & {
      margin-top: var(--pf-c-nav__section--MarginTop);
    }
  }

  // Disable underline
  [class*="list"] [class*="link"] {
    &,
    &:hover,
    &:focus,
    &:active {
      text-decoration: none;
    }
  }
}

.pf-c-nav-toggle {

  /* stylelint-disable */

  // Toggle
  --pf-c-nav-toggle--Padding:         var(--pf-global--nav-toggle--Padding);
  --pf-c-nav-toggle--FontSize:        var(--pf-global--FontSize--2xl);

  /* stylelint-enable */

  position: relative;
  z-index: 99;
  padding: var(--pf-c-nav-toggle--Padding);
  // Ensure button does not adjust positioning
  margin-top: calc(var(--pf-c-nav-toggle--Padding) * -1);
  margin-bottom: calc(var(--pf-c-nav-toggle--Padding) * -1);
  margin-left: calc(var(--pf-c-nav-toggle--Padding) * -1);

  font-size: var(--pf-c-nav-toggle--FontSize);
  line-height: 1;
  border: none;
}

// &.alt-layout {
//   &__list,
//   &__list-horizontal {

//     // Item
//     &-item {
//       position: relative;
//       display: flex;
//       flex-wrap: wrap;
//       align-items: baseline;
//       background-color: var(--pf-c-nav__item--BackgroundColor);
//     }

//     // Link
//     &-link {
//       position: relative;
//       display: flex;
//       flex: 1;
//       align-items: baseline;
//       padding:
//         var(--pf-c-nav__list-link--PaddingTop)
//         var(--pf-c-nav__list-link--PaddingRight)
//         var(--pf-c-nav__list-link--PaddingBottom)
//         var(--pf-c-nav__list-link--PaddingLeft);

//       font-weight: var(--pf-c-nav__list-link--FontWeight);
//       color: var(--pf-c-nav__list-link--Color);
//       word-break: break-all;
//       background-color: var(--pf-c-nav__list-link--BackgroundColor);

//       // Adjust padding top for subsequent links
//       #{$namespace}__list-item:not(:first-child) & {
//         padding-top: var(--pf-c-nav__list-link--not-first-child--PaddingTop);
//       }

//       #{$namespace}__list-horizontal-item:not(:first-child) & {
//         @media screen and (max-width: $pf-global--breakpoint--md) {
//           padding-top: var(--pf-c-nav__list-link--not-first-child--PaddingTop);
//         }
//       }

//       // After - border bottom treatment
//       &::after {
//         position: absolute;
//         bottom: 0;
//         left: var(--pf-c-nav__list-link--after--Left);
//         width: var(--pf-c-nav__list-link--after--Width);
//         height: var(--pf-c-nav__list-link--after--Height);
//         content: "";
//         background-color: var(--pf-c-nav__list-link--after--BackgroundColor);
//       }

//       // States
//       &:hover,
//       &:focus,
//       &:active,
//       &.pf-m-active,
//       .pf-m-current > &,
//       &.pf-m-current {
//         color: var(--pf-c-nav__list-link--hover--Color);
//         background-color: var(--pf-c-nav__list-link--hover--BackgroundColor);

//         &::after {
//           background-color: var(--pf-c-nav__list-link--hover--after--BackgroundColor);
//         }
//       }

//       // Disabled
//       &.pf-m-disabled,
//       &:disabled {
//         color: var(--pf-c-nav__list-link--disabled--Color);
//         cursor: not-allowed;
//         background-color: var(--pf-c-nav__list-link--disabled--BackgroundColor);

//         &::after {
//           background-color: var(--pf-c-nav__list-link--disabled--after--BackgroundColor);
//         }
//       }
//     }
//   }
// }
